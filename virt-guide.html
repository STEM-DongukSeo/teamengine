<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2016-08-15 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160815" />
    <meta http-equiv="Content-Language" content="en" />
    <title>TEAM Engine &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="https://github.com/opengeospatial/teamengine" id="bannerLeft">
                                                                                                <img src="./images/te-logo-small.png"  alt="TEAM Engine"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://www.osgeo.org/incubator" id="bannerRight">
                                                                                                <img src="./images/OSGeo_incubation.png"  alt="OSGeo Incubator"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2016-08-15
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 4.8.1
                      </li>
                      
              
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="https://github.com/opengeospatial/teamengine/issues" class="externalLink" title="Issues">
        Issues</a>
      </li>

  
    <li class="pull-right">
                      <a href="https://github.com/opengeospatial/teamengine/wiki" class="externalLink" title="Wiki">
        Wiki</a>
      </li>

                    </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Getting Started</li>
                              
      <li>
  
                          <a href="index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                
      <li>
  
                          <a href="installation.html" title="Installation">
          <span class="none"></span>
        Installation</a>
            </li>
                
      <li>
  
                          <a href="users.html" title="User's Guide">
          <span class="none"></span>
        User's Guide</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Virtualization Guide</a>
          </li>
                              <li class="nav-header">Test Suite Development</li>
                              
      <li>
  
                          <a href="testng-essentials.html" title="Using TestNG, Part 1: Essentials">
          <span class="none"></span>
        Using TestNG, Part 1: Essentials</a>
            </li>
                
      <li>
  
                          <a href="testng-cookbook.html" title="Using TestNG, Part 2: Cookbook">
          <span class="none"></span>
        Using TestNG, Part 2: Cookbook</a>
            </li>
                
      <li>
  
                          <a href="ctl.html" title="Using CTL Scripts">
          <span class="none"></span>
        Using CTL Scripts</a>
            </li>
                              <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="relnotes.html" title="Release Notes">
          <span class="none"></span>
        Release Notes</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Virtualization Guide</h1>
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide describes how to generate a virtual machine (VM) or container image that provides
a complete TEAMengine installation along with the latest OGC conformance test suites. The
required software components are shown in the following figure.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/teamengine-vm.png" alt="software components"/>
</div>
<div class="title">Figure 1. Software components</div>
</div>
<div class="paragraph">
<p><a href="https://www.packer.io/">Packer</a> is an open-source infrastructure definition tool used
to create images for a variety of dynamic infrastructure platforms. It includes builders
for many virtual environments, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>VirtualBox</p>
</li>
<li>
<p>Amazon EC2</p>
</li>
<li>
<p>VMware vSphere</p>
</li>
<li>
<p>Google Compute Engine</p>
</li>
<li>
<p>Docker (container)</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Virtual machines vs. containers</div>
<div class="paragraph">
<p>A container is not a full-blown virtual machine&#8212;&#8203;it doesn&#8217;t require a hypervisor and runs in
an isolated environment provided by a single host operating system. Since the OS kernel is
shared, a container generally has less overhead than a virtual machine. Container technologies
such as Docker, Warden, and Rocket offer a way to package and distribute a service or an
application along with its dependencies.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The build process is driven by a template: a configuration file (in JSON format) that defines
how a machine image is created and automatically provisioned.</p>
</div>
<div class="paragraph">
<p>To install Packer, simply download the appropriate <a href="https://www.packer.io/downloads.html">binary package</a>
for your environment and unpack the archive into a suitable directory; then set the following
user environment variables:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">PACKER_HOME</dt>
<dd>
<p>The directory where packer is installed.</p>
</dd>
<dt class="hdlist1">PACKER_CACHE_DIR</dt>
<dd>
<p>The location of the packer cache (for downloaded resources).</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Update the PATH environment variable to include PACKER_HOME.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="virtualbox">VirtualBox</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview">Overview</h3>
<div class="paragraph">
<p><a href="https://www.virtualbox.org/">VirtualBox</a> is a freely available virtualization product
that runs on Windows, Linux, and Mac hosts. It supports a wide variety of guest operating
systems and is very useful in creating development or test environments. The Packer
template will create a complete, ready-to-run teamengine installation that contains
the desired set of OGC test suites. The output is an "appliance" (in the standard <a href="http://www.dmtf.org/standards/ovf">OVF format</a>)
that can be imported into VirtualBox.</p>
</div>
</div>
<div class="sect2">
<h3 id="install_virtualbox">Install VirtualBox</h3>
<div class="paragraph">
<p>To install VirtualBox, download a suitable <a href="https://www.virtualbox.org/wiki/Downloads">installation package</a> for
your host environment; see the user manual for <a href="https://www.virtualbox.org/manual/ch02.html">installation instructions</a>.
When installation is complete, set the following user environment variable:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">VBOX_USER_HOME</dt>
<dd>
<p>The location where virtual machines will be created.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="creating_and_importing_the_image">Creating and importing the image</h3>
<div class="paragraph">
<p>The Packer template makes use of several supporting shell scripts and files (see Note 1). In the
'files' subdirectory is a CSV file (ets-releases.csv) that contains a list of OGC test suite releases;
each line has two fields: a Git repository URL, and a tag name indicating the release version. The
test suites listed in this file will be added to the TEAM-engine instance. If a test suite is not
wanted, just comment it out by inserting a number sign (or hash character, #) at the beginning of
the appropriate line.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note 1</div>
</td>
<td class="content">
<div class="paragraph">
<p>The template file (teamengine-centos72.json) can be found in the src/main/config/packer/ directory in the
teamengine source tree, or wherever the Packer assembly was unpacked. To create the packer assembly, run
this Maven command at the root of the teamengine source tree: <code>mvn assembly:single</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The template defines several user variables that can be overridden from the command line or a file;
see <a href="https://www.packer.io/docs/templates/user-variables.html" class="bare">https://www.packer.io/docs/templates/user-variables.html</a>). These are listed in the table below,
along with their default values.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Template variables</caption>
<colgroup>
<col style="width: 20%;"/>
<col style="width: 20%;"/>
<col style="width: 60%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">te_version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"4.7"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The desired version of the TEAMengine web application <a href="http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22teamengine-web%22">available at Maven Central</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ets_resources_release</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">""</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The desired <a href="https://github.com/opengeospatial/ets-resources/releases">ets-resources release version</a>;
this project aggregates all test suite dependencies. If not specified, the latest snapshot (tip of the master branch) will be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">use_oracle_jdk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"false"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether or not to use the Oracle JDK (which is subject to a
<a href="http://www.oracle.com/technetwork/java/javase/terms/license/index.html">license agreement</a>).
If not, OpenJDK will be used.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To create the virtual appliance, simply change to the directory containing the Packer template and
execute this command in a shell console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>packer build teamengine-centos72.json</pre>
</div>
</div>
<div class="paragraph">
<p>The appliance will be created in the output-centos72-virtualbox subdirectory. The base operating
system is <a href="https://www.centos.org/">CentOS</a> 7.2 (more specifically, the minimal distribution intended
for "headless" operation). To run it, start VirtualBox and perform the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choose <strong>File &gt; Import Appliance&#8230;&#8203;</strong> and select the *.ovf file</p>
</li>
<li>
<p>When the import is completed, select the newly created virtual machine and press "Start"</p>
</li>
<li>
<p>When the boot sequence finishes, login using an SSH client to localhost:2222&#8212;&#8203;or use the
VirtualBox terminal&#8212;&#8203;with the teamengine user credentials (see Note 2)</p>
</li>
<li>
<p>To start or stop Tomcat, execute this command:  <code>sudo systemctl start|stop tomcat-jsvc</code></p>
</li>
<li>
<p>The main teamengine web app is available at http://localhost:8888/teamengine (see Note 3)</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note 2</div>
</td>
<td class="content">
<div class="paragraph">
<p>The user credentials are specified in the Packer template (<code>ssh_name</code>, <code>ssh_pass</code>). This is a
normal user account with 'sudo' privileges.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note 3</div>
</td>
<td class="content">
<div class="paragraph">
<p>The VM runs on a private internal network using the default networking mode: network address
translation (NAT); this prevents all direct inbound connections, but not outbound connections.
Some port forwarding rules are created in order to allow remote access to the SSH server (via
localhost:2222) and the Tomcat web container (via localhost:8888).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2016
                        <a href="http://www.opengeospatial.org/">Open Geospatial Consortium</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
